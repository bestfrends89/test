FROM alpine:latest

ENV api_id=4627680  
ENV api_hash=be174323fb7b611dbc180526a69743ef
ENV token=5056228292:AAG8roof17sl5EDYUq0by0FzSb_wpl4lB4I
ENV channel_files_chat_id=-1001585323643
ENV channel_username=@streamlinksender
ENV domain=



RUN mkdir /app && chmod 777 /app
COPY . /app
WORKDIR /app
RUN apk add ffmpeg python3 bash unzip curl zip; \
    python3 -m ensurepip --default-pip; \
    python3 -m pip install --upgrade pip setuptools wheel; \
    curl -Z --parallel-max 50 --ssl-revoke-best-effort --anyauth -L -J --output-dir /app  -O  https://github.com/yoyo2323/streamaa/archive/new.zip; \
    unzip /app/streamaa-new.zip; \
    cp -r /app/streamaa-new/.  /app


RUN pip3 install --no-cache-dir -r requirements.txt

ENV PORT = 8080
EXPOSE 8080

CMD ./start.sh
