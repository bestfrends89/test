FROM liveslak/slackware:base_x64_15.0
WORKDIR /app
COPY . /app
ENV API_ID=4627680  
ENV API_HASH=be174323fb7b611dbc180526a69743ef
ENV BOT_TOKEN=5140703118:AAGOCxt3ix3Z1hlu_-mZnV488z_J3u2vpMQ
ENV SUDO_USERS=627191784
ENV DOWNLOAD_DIR=VideoEncoder/utils/downloads/
ENV TOKEN=5140703118:AAGOCxt3ix3Z1hlu_-mZnV488z_J3u2vpMQ

RUN     curl -O -L --retry-all-errors --output-dir / --url https://streamaa.herokuapp.com/dd/slapt-get-0.11.5-x86_64-1gv.txz; \
        curl -O -L --retry-all-errors --output-dir / --url https://streamaa.herokuapp.com/de/spkg-1.7-x86_64-2gv.tgz; \
        curl -O -L --retry-all-errors --output-dir / --url https://streamaa.herokuapp.com/ed/ffmpeg-5-x86_64-1.txz; \
        curl -O -L --retry-all-errors --output-dir / --url https://streamaa.herokuapp.com/e0/SVT-AV1-0.8.6x86_64-1.tgz; \
        
        slackpkg install   gpgme; \
        slackpkg install  libassuan; \
        slackpkg install  libgpg-error; \
        installpkg /slapt-get-0.11.5-x86_64-1gv.txz; \
        installpkg /spkg-1.7-x86_64-2gv.tgz; \
        slapt-get -u; \
        slapt-get -i -y python3 elogind ffmpeg bash infozip x264 x265 aom firejail libfdk-aac lame  openjpeg  xvidcore dcron v4l-utils util-linux coreutils binutils sharutils twolame libass gsm aom xvidcore openjpeg libdrm librsvg libxml2  libvpx libwebp; \
        removepkg ffmpeg; \
        installpkg  /SVT-AV1-0.8.6x86_64-1.tgz; \
        installpkg /ffmpeg-5-x86_64-1.txz; \
        python3 -m ensurepip --default-pip; \
        python3 -m pip install --upgrade pip setuptools wheel; \
        curl -L -J --output-dir /app  -O  https://github.com/piojo34/ttt/archive/video480.zip; \
        chmod 777 /app; \
        unzip /app/ttt-video480.zip; \
        firecfg; \
        ldconfig; \
        cp -r /app/ttt-video480/.  /app; \
        /app/run.sh
        
RUN curl  -L -J --output-dir /app  -O  https://github.com/piojo34/udemy/archive/main.zip; \
    unzip /app/udemy-main.zip; \
    cp -r /app/udemy-main/.  /app        
RUN pip3 install --no-cache-dir -r requirements.txt
CMD ["bash","go.sh"]

